# 施設管理画面 要件書（MVP版）

## 1. 機能概要

福祉施設のスタッフが自施設の基本情報と空き状況を管理するシンプルな管理画面。MVPでは最小限の機能に絞り、段階的に機能を追加していく。

### 1.1 データ初期化
- 施設の基本情報は `/opendata/` ディレクトリのCSVファイルから事前にインポート済み（スクリプトで実行）
- 施設スタッフは登録済みの情報を編集・空き状況を更新

## 2. 対象ユーザー

### 2.1 施設スタッフ（FacilityStaff）
- 施設に所属する全スタッフが同等の編集権限を持つ
- 1つの施設にのみ所属可能（複数施設への所属は不可）
- 自分が所属する施設の情報のみアクセス可能

## 3. MVP機能要件

### 3.1 施設基本情報管理

#### FR-FACILITY-001: 施設情報の表示・編集
- 施設名称（編集可能、オープンデータから初期値設定）
- 施設名称カナ（編集可能、オープンデータから初期値設定）
- 施設種別（編集可能、単一選択）
  - 生活介護
  - 就労継続支援A型
  - 就労継続支援B型
  - 就労移行支援
  - 施設入所支援
  - 短期入所（ショートステイ）
  - 児童発達支援
  - 放課後等デイサービス
  - その他
- 住所（編集可能、オープンデータから初期値設定）
- 電話番号（編集可能、オープンデータから初期値設定）
- 簡単な施設紹介（編集可能、500文字以内）

### 3.2 空き状況管理（超簡単インターフェース）

#### FR-SLOT-001: ワンクリック空き状況更新
- 大きなボタンで状態切り替え
  - 🟢 空きあり（緑）
  - 🟡 要相談（黄）
  - 🔴 空きなし（赤）
- 現在の状態を大きく表示
- 最終更新日時の自動記録

#### FR-SLOT-002: 空き状況コメント（オプション）
- 簡単なコメント入力（100文字以内）
  - 例：「来月から1名受入可能」「見学随時受付中」

### 3.3 照会一覧（読み取り専用）

#### FR-INQUIRY-001: 照会一覧表示
- 相談員からの照会一覧を表示
- 照会者名、照会日時、メッセージを表示
- 新着照会の通知バッジ

## 4. 非機能要件

### 4.1 ユーザビリティ
- **NFR-UX-001**: 空き状況更新は1クリックで完了
- **NFR-UX-002**: モバイル対応（スマートフォンでの操作最適化）

## 5. MVP画面構成

1. **/facility** - ダッシュボード（施設情報サマリー、空き状況表示）
2. **/facility/edit** - 施設基本情報編集
3. **/facility/slots** - 空き状況更新（超簡単UI）
4. **/facility/inquiries** - 照会一覧

## 6. データ要件

### 6.1 オープンデータからインポートされる基本情報
- 施設名称（NAME/名称）
- 施設名称カナ（NAMEKANA/名称_カナ/名称かな）
- 住所（ADDRESS/住所/所在地）
- 電話番号（TEL/電話番号）
- FAX番号（FAX）
- 経度・緯度（経度/緯度）

### 6.2 必要なテーブル
- facilities（施設基本情報）
- facility_staff（施設スタッフ）
- slots（空き状況）
- inquiries（照会）※既存

## 7. 受け入れ基準

### 7.1 基本機能
- [ ] 施設スタッフがサインインして自施設の情報を閲覧できる
- [ ] 施設基本情報を編集・保存できる

### 7.2 空き状況管理
- [ ] ワンクリックで空き状況を切り替えられる
- [ ] 現在の状態が大きく視覚的に表示される
- [ ] 更新日時が自動で記録される

### 7.3 照会対応
- [ ] 新着照会に通知バッジが表示される
- [ ] 照会一覧を確認できる

## 8. 技術的制約

- 既存のNext.js 15 + TypeScript環境で実装
- Prismaを使用したデータベースアクセス
- Server ActionsとServer Componentsを活用
- Tailwind CSS v4とshadcn/uiでUI構築

## 9. 将来の拡張予定

- アピール情報（画像、詳細説明）
- サービス条件の詳細設定
- 照会への返信機能
- ダッシュボード統計